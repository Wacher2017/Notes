<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>运动基础</title>
	<style type="text/css">
		#div1 {width: 200px;height: 200px;background: red;position: absolute;top: 50px;left: 0;}
	</style>
	<script type="text/javascript">
		/**
		 * 基础运动
		 * 存在Bug：
		 * 1.不会停止
		 * 2.速度取某些值会无法停止
		 * 3.到达位置后再点击还会动
		 * 4.重复点击速度加快
		 */
		/*function startMove() {
			var oDiv = document.getElementById('div1');
			setInterval(function() {
				oDiv.style.left = oDiv.offsetLeft + 10 + 'px';			
			}, 30);
		}*/

		/**
		 * 解决第一个Bug：不会停止
		 * 【解决办法】定义一个定时器，满足条件时清除
		 */
		/*var timer = null;
		function startMove() {
			var oDiv = document.getElementById('div1');
			timer = setInterval(function() {
				if(oDiv.offsetLeft == 300) {
					clearInterval(timer);
				}
				oDiv.style.left = oDiv.offsetLeft + 10 + 'px';							
			}, 30);
		}*/

		/**
		 * 解决第二个Bug：速度取某些值会无法停止
		 * 【解决办法】定义一个speed变量，方便改值，将if条件的==改为>=
		 */
		/*var timer = null;
		function startMove() {
			var oDiv = document.getElementById('div1');
			timer = setInterval(function() {
				var speed = 7;
				if(oDiv.offsetLeft >= 300) {
					clearInterval(timer);
				}
				oDiv.style.left = oDiv.offsetLeft + speed + 'px';							
			}, 30);
		}*/

		/**
		 * 解决第三个Bug：到达位置后再点击还会动
		 * 【解决办法】把运动和停止隔开
		 */
		/*var timer = null;
		function startMove() {
			var oDiv = document.getElementById('div1');
			timer = setInterval(function() {
				var speed = 1;
				if(oDiv.offsetLeft >= 300) {
					clearInterval(timer);
				} else {
					oDiv.style.left = oDiv.offsetLeft + speed + 'px';
				}										
			}, 30);
		}*/

		/**
		 * 解决第四个Bug：重复点击速度加快
		 * 【解决办法】在开始运动时，关闭已有定时器:clearInterval(timer);
		 */
		var timer = null;
		function startMove() {
			var oDiv = document.getElementById('div1');
			clearInterval(timer);
			timer = setInterval(function() {
				var speed = 1;
				if(oDiv.offsetLeft >= 300) {
					clearInterval(timer);
				} else {
					oDiv.style.left = oDiv.offsetLeft + speed + 'px';
				}				
			}, 30);
		}
	</script>
</head>
<body>
	<input id="btn1" type="button" value="开始运动" onclick="startMove()">
	<div id="div1"></div>
</body>
</html>